  <!-- Save as projects.html and place in the same folder as index.html -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Projects — Matthew Lee</title>
  <style>
    :root{
      --bg:#f8f9fa;
      --card:#fff;
      --accent:#007bff;
      --muted:#666;
      --shadow: 0 6px 18px rgba(15, 23, 42, 0.08);
      --radius:12px;
      --max-w:1100px;
    }

    body{
      font-family: Arial, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue";
      margin:0;
      background:var(--bg);
      color:#222;
      line-height:1.5;
    }

    header {
      background: #003262;
      color: white;
      text-align: center;
      padding: 2rem 1rem;
    }

    header h1{ margin:0; font-size:1.5rem; }
    header p{ margin:.4rem 0 0; color:#dcdcdc; font-size:0.95rem; }

    .wrap{
      max-width:var(--max-w);
      margin:2rem auto;
      padding:0 1rem;
    }

    /* page title + back link */
    .page-head{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:1rem;
      margin-bottom:1rem;
    }
    .page-head h2{ margin:0; font-size:1.25rem; }
    .btn {
      display:inline-block;
      background:var(--accent);
      color:white;
      padding:.5rem .9rem;
      border-radius:8px;
      text-decoration:none;
      font-weight:600;
    }
    .btn-secondary {
      background:transparent;
      border:1px solid #e1e6ee;
      color: #111;
    }

    /* project block */
    .project {
      background:var(--card);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:1.25rem;
      margin:1.25rem 0;
      overflow:hidden;
    }

    .project-head {
      display:flex;
      gap:1rem;
      align-items:flex-start;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    .project-meta {
      flex:1 1 380px;
    }
    .project-meta h3{ margin:0 0 .25rem 0; }
    .project-meta p.lead{ margin:0; color:var(--muted); }
    .project-info {
      text-align:right;
      min-width:160px;
      flex:0 0 auto;
    }
    .project-info small{ display:block; color:var(--muted); }

    /* gallery */
    .gallery {
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(140px,1fr));
      gap:.6rem;
      margin-top:1rem;
    }
    .gallery a{
      display:block;
      overflow:hidden;
      border-radius:8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      border:1px solid #eef3fb;
    }
    .gallery img{
      width:100%;
      height:110px;
      object-fit:cover;
      display:block;
      transition: transform .18s ease;
    }
    .gallery a:hover img{ transform: scale(1.04); }

    /* long description area */
    .project-content {
      margin-top:1rem;
      color:#333;
    }
    .project-tags { margin-top:.6rem; color:var(--muted); font-size:0.95rem; }

    /* simple lightbox modal */
    .lightbox {
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.7);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:2000;
      padding:2rem;
    }
    .lightbox.open { display:flex; }
    .lightbox img {
      max-width:100%;
      max-height:100%;
      border-radius:8px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.45);
    }
    .lightbox .close {
      position:absolute;
      right:18px;
      top:18px;
      background:rgba(255,255,255,0.9);
      color:#111;
      border-radius:6px;
      padding:.3rem .5rem;
      cursor:pointer;
      font-weight:700;
    }

    .rgb-led {
  display: inline-block;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: red;
  box-shadow: 0 0 8px red;
  animation: rgb-cycle 3s infinite;
}

@keyframes rgb-cycle {
  0%   { background: red;   box-shadow: 0 0 8px red; }
  33%  { background: green; box-shadow: 0 0 8px green; }
  66%  { background: blue;  box-shadow: 0 0 8px blue; }
  100% { background: red;   box-shadow: 0 0 8px red; }
}

    .sidebar {
  position: fixed;
  top: 0;
  left: 0;
  height: 100%;
  width: 220px;
  background: #222;
  color: #fff;
  padding: 2rem 1rem;
  box-shadow: 2px 0 6px rgba(0,0,0,0.3);
  overflow-y: auto;
  z-index: 1000;
}

.sidebar h3 {
  margin-top: 0;
  color: #66b2ff;
  font-size: 1.2rem;
}

.sidebar ul {
  list-style: none;
  padding: 0;
}

.sidebar ul li {
  margin: 1rem 0;
}

.sidebar ul li a {
  color: #ddd;
  text-decoration: none;
  font-weight: 500;
  transition: color 0.2s;
}

.sidebar ul li a:hover {
  color: #66b2ff;
}

/* Push main content over so it doesn’t hide under sidebar */
body {
  margin-left: 240px;
}



    /* responsive tweaks */
    @media (max-width:720px){
      header{ padding:1.25rem .75rem; }
      .gallery img{ height:90px; }
      .project-info { text-align:left; width:100%; margin-top:.5rem; }
    }
  </style>
</head>
<body>
  <nav class="sidebar">
  <h3>Projects</h3>
  <ul>
    <li><a href="#horn-pcb">Car Horn PCB</a></li>
    <li><a href="#guitar-pedal">Guitar Pedal</a></li>
    <li><a href="#solar-vehicle">Solar Vehicle</a></li>
    <li><a href="#calsol-onboarding">CalSol Onboarding</a></li>
    <li><a href="#wip">Work in Progress</a></li>
  </ul>
</nav>

  <header>
    <h1>Matthew Lee — Project Portfolio</h1>
    <p> The various hardware and software projects I've created </p>
  </header>

  <main class="wrap">
    <div class="page-head">
      <h2>All Projects</h2>
      <div>
        <a class="btn" href="index.html">← Back to Home</a>
        <a class="btn btn-secondary" href="assets/Matthew_HW_Resume_9_20_25.pdf" style="margin-left:.6rem">Download Resume</a>
      </div>
    </div>

    <!-- =========================
         Project: Car Horn PCB
         Put images in: images/projects/car-horn/
         Examples: images/projects/car-horn/pcb-top.jpg, /pcb-bottom.jpg, /scope.png, /photo-1.jpg
         ========================= -->
    <article class="project" id="car-horn">
      <div class="project-head">
        <div class="project-meta">
          <h3>Car Horn PCB</h3>
          <p class="lead">Mixed-signal audio PCB with custom ESP32 dev board, CAN integration, and I²C DAC chain.</p>
          <div class="project-tags">Roles: PCB design • Firmware • Bring-up • Signal validation</div>
        </div>

        <div class="project-info">
          <small>Oct 2024 – Apr 2025</small>
        </div>
      </div>

      <div class="gallery" aria-label="Car horn images">
        <!-- Thumbnails link to full images. Update filenames -->
        <a href="images/HornBenchPicture.jpg" data-full>
          <img src="images/HornBenchPicture.jpg" alt="Car Horn Bench Testing">
        </a>
        <a href="images/HornBringUp.jpg" data-full>
          <img src="images/HornBringUp.jpg" alt="Car Horn PCB Bring Up">
        </a>
        <a href="images/HornLayout.png" data-full>
          <img src="images/HornLayout.png" alt="Layout Picture">
        </a>
        <a href="images/SoundSchematic.png" data-full>
          <img src="images/SoundSchematic.png" alt="Sound Schematic">
        </a>
        <a href="images/ESPSchematic.png" data-full>
          <img src="images/ESPSchematic.png" alt="ESP Schematic">
        </a>
      </div>

      <!-- =========================
         Project: Car Horn PCB
         Place images in: images/
         ========================= -->
      <div class="project-content">
        <p>
          "Solar cars shall be equipped with a horn that can be heard at a sound power level between 75 and 102 dBA
          at a distance of 15 m in front of the solar car. The horn shall be permanently mounted, operated from the
          steering wheel, and shall be able to operate for up to 5 minutes continuously at the required volume."
        </p>
        <h3> ESP32 Dev Board </h3>
        <p>
          The first major sub circuit is the ESP32 Dev Board. It is implemented with an ESP32 Wroom 1 and necessary peripherals
          including boot and reset buttons, and a USB to UART IC. The design process came mainly from reading the ESP and UART IC
          datasheets and picking correct passives around them. The layout was tricky due to needing differential routing for the UART
          and USB differential lines. Effort was also taken to deal with large current draw from the horn by having large polygon power 
          planes around the amplifier. 2nd Layer was also used as a ground plane for similar reasons. There was also a large effort by me
          to make the boards layout modular and readable through verbose silkscreen and documentation of each sub circuit on confluence.
        </p>
        <h3> Power </h3>
        <p>
          The board has the challenge of using 12V CAN BUS power for most LV operations, but requiring an 18V aux pack for the higher current
          draw amplifier. This is achieved through two diode OR circuits. There is one for LV between the 12V CAN line (that comes from a differential
          five pin molex connector to the car) and the 5V USB power. This diode OR goes into a 3.3V buck converter, that was chosen to allow
          flexibility with 12V and 24V CAN lines, as well as interfacing with the 5V USB. The other OR circuit is between the 18V and 12V circuit,
          with a priority circuit using FETs that chooses the 18V power. This allows for a nominal 18V power on the amplifier, with a redundant
          12V in case the aux pack dies. The biggest design problems were the general high power draw of the horn, that required a lot of thermal
          considerations and IC choice.
        </p>
        <h3> Sound </h3>
        <p>
          The sound architecture goes: ESP digital IO pin -> I2C based DAC -> High gain amplifier -> Speaker. Between the digital pins and the DAC
          there is open drain architecture for data and clock. The output of the DAC has heavy decoupling capacitors to smooth output, as well as a
          LP filter to attenuate high frequencies. The amp only takes positive voltage, so the output sine wave must be biased to 1.65 volts before
          going into the amp. After the amp, we chose a large capacitor in series with the speaker to cut the DC bias. The hardest design decisions
          were finding a DAC, amplifier, and speaker setup that interfaced with each other and the given power constraints. This was solved with
          hand calculations for gain as well as breadboarding and simulations with SPICE.
        </p>
        <h3> Bring Up + Verification </h3>
        <p>
          The board in the image is the 2nd iteration of the board. During the first bring up we noticed two things while bench testing. One, we greatly
          underestimated the power draw of the amplifier relative to the trace width and heat sinks we had. Second, we found a data sheet misread
          of the UART IC leading to us needing to jump D+ and D- with microwire. Both we fixed in the second iteration. The bring up process for the 
          second draft was done mainly with: DC power supplies and multimeters to verify power circuitry; waveform generators to verify the amplifier;
          oscilloscopes to verify the digital and analog signals coming in and out of the DAC; and CAN snooping combined with Serial monitoring to debug 
          firmware. We however did have a shorted trace caused from a polygon and trace being too big, leading us to cut it with a knife. In the end, 
          the horn worked with a few microwire jumps and traces cut.
        </p>
        <h3> Firmware </h3>
        <p>
          The firmware for the most part is simple, relying heavily on datasheet reading and use of the I2C interface. The main interesting thing was
          to figure out how to create a digital sound signal to output. We effectively took layered sine waves representing the signal we wanted to output
          and summed the amplitude at sampled points. We then put it into an array and iterated through the array to output the value. Otherwise, we had
          to interface into the CAN interface of the rest of the car. This includes reading data and looking for a signal from steering to power on the horn,
          and sending a heartbeat on CAN to the rest of the car to signal the horn boards microcontroller is still operational.
        </p>
      </div>
    </article>

    <article class="project" id="calsol-onboarding">
  <div class="project-head">
    <div class="project-meta">
      <h3>CalSol Electrical Onboarding</h3>
      <p class="lead">Open-source onboarding curriculum to teach PCB design & electrical fundamentals</p>
      <div class="project-tags">Education • PCB Design • Open Source • Teaching</div>
    </div>
    <div class="project-info">
      <small>2025</small>
      <a href="https://github.com/CalSol/CalSol-Electrical-Onboarding" class="btn" style="margin-top:0.6rem; display:inline-block;">GitHub</a>
    </div>
  </div>

  <div class="gallery" aria-label="CalSol Electrical Onboarding images">
    <!-- Example thumbnails / images; replace names with real ones you have -->
    <a href="images/githubmodule.png" data-full>
      <img src="images/githubmodule.png" alt="Git Module Picture">
    </a>
    <a href="images/DemoBoard.png" data-full>
      <img src="images/DemoBoard.png" alt="Demo PCB">
    </a>
    <a href="images/PWMPic.png" data-full>
      <img src="images/PWMPic.png" alt="PWM Picture">
    </a>
  </div>

  <div class="project-content">
    <p>
      The CalSol Electrical Onboarding project is an open-source educational repository developed for the
      CalSol team to onboard new members in PCB design and basic Electrical Engineering. It guides learners through
      schematic design, PCB layout, firmware writing, and practical Electrical Engineering skills, with a hands-on project 
      that culminates in the design and bring up of a PWM Generator. It is also designed to be fast, being done in two weeks.
      In turn, this onboarding gives a taste of Electrical Engineering before throwing members onto a project.
    </p>

    <h3>Curriculum & Pedagogy</h3>
    <p>
      The onboarding curriculum is modular: learners first learn about the components and concepts required to
      understand a PWM generator (including various passives and ICs); then they learn about the KiCAD software
      to perform PCB schematic and PCB layout; they then do physical board bring up and verification with an oscilloscope;
      and capped off with a firmware primer. Each module includes dense tutorials, project guidelines, and exercises 
      to reinforce best practices. The goal is to prime people illiterate in Electrical Engineering into a position
      that they can put in valuable work on any PCB project. This is why the pedagogy is letting each person get there hands
      on the full life cycle of a project, with the onboarding staff acting to purely assist the new members.
    </p>

    <h3> The Project</h3>
    <p>
      The project is a PWM motor generator. This project was selected as it hit a few major requirements. These include:
      use of many components including passives, diodes and MOSFETs; existence of different waveform signals including a square
      wave, sawtooth wave, and triangle wave; the need to read at least one IC datasheet; and enough components to make layout
      interesting. This allows us to give a glimpse of Electrical Engineering to the person reading through the lab. The firmware
      project is also very basic, being a button that triggers the ESP32 to output a similar PWM signal.
    </p>

    <h3>Outcomes & Impact</h3>
    <p>
      New CalSol members are able to join projects immediately, having completed a real PCB design exercise by the
      end of the onboarding. The exposure to everything makes the job of project leads easier, leading to seamless
      transition into projects. The open-source nature also allows other students and student groups
      to use or adapt our project to further teach engineering. We have on many occasions referred interested students
      to the project to make Berkeley more PCB literate.
    </p>
  </div>
</article>

    <article class="project" id="guitar-pedal">
      <div class="project-head">
        <div class="project-meta">
          <h3>Guitar Pedals</h3>
          <p class="lead">Op-amp and MOS based guitar pedals for distortion and filtering</p>
          <div class="project-tags">Skills: Bandpass Filter, Op Amp, MOSFET</div>
        </div>
        <div class="project-info">
          <small>Mar 2025 – Present</small>
          <a href="https://github.com/username/solar-vehicle" class="btn" style="margin-top:.6rem; display:inline-block;">View GitHub</a>
        </div>
      </div>

      <div class="gallery" aria-label="Pedal Images">
        <a href="images/TrebleBoostBreadboard.jpg" data-full>
          <img src="images/TrebleBoostBreadboard.jpg" alt="Treble Breadboard">
        </a>
        <a href="images/TrebleBoostBode.png" data-full>
          <img src="images/TrebleBoostBode.png" alt="Treble Boost Bandwidth">
        </a>
        <a href="images/projects/solar-vehicle/distribution-board.jpg" data-full>
          <img src="images/projects/solar-vehicle/distribution-board-thumb.jpg" alt="Distribution board">
        </a>
        <a href="images/projects/solar-vehicle/can-trace.png" data-full>
          <img src="images/projects/solar-vehicle/can-trace-thumb.png" alt="CAN waveform">
        </a>
      </div>

      <div class="project-content">
        <h3> Op-Amp Circuit </h3>
        <p>
          The pedal circuit is centered around a bandpass filter going through an op-amp in order to shape and amplify the guitar signal.
          The op amp is in the non-inverting configuration with a varaible resistor to determine the feedback, therefore controlling the
          gain. There is a HP filter before and after the op amp to attenutate DC signals and to boost treble frequencies. There is a LP
          filter in parallel with the potentiometer to create a desired gain within the bandwidth. The result is a treble boosting circuit that
          attenuates signals outside of the desired treble range.
        </p>
        <h3> Simulation & Testing </h3>
        <p>
          Each filter of the pedal was simulated in LTspice to validate frequency response, stability, and expected bode plot behavior.
          Frequency analysis confirmed the bandpass characteristics and the correct cutoff frequencies. I observed the time domain plots 
          as well to validate the phase didn't flip to -180 degrees. Both time and frequency domain analysis allowed me to verify that the
          passives I chose were the correct values in order to achieve the correct bandwidth and gain. I further verified on a breadboard
          using an oscilloscope and waveform generators to simulate different frequency signals, in order to find a frequency response. I
          finalized the project by plugging in my guitar input into the circuit input, and the output into my amplifier to verify the
          correct output sound.
        </p>
        <h3> MOSFET Circuit </h3>
        <p>
          TBD
        </p>
        <h3> Simulation & Testing </h3>
        <p>
          TBD
        </p>
      </div>
    </article>

      
  <article class="project" id="new-project">
    <div class="project-head">
      <div class="project-meta">
        <h3>Gen11 Solar Car Electrical System</h3>
        <p class="lead"></p>
        <div class="project-tags">Tag1 • Tag2 • Tag3</div>
      </div>
    <div class="project-info">
      <small>2025-26</small>
    </div>
  </div>

  <div class="gallery">
    <!-- Replace with project images -->
    <a href="images/projects/placeholder.png" data-full>
      <img src="images/projects/placeholder-thumb.png" alt="Placeholder image">
    </a>
  </div>

  <div class="project-content">
    <p>
      🚧 <em>This project is actively being worked on. More documentation, images, and technical details will be added soon.</em>
    </p>
  </div>
</article>
  
<article class="project" id="wip">
  <div class="project-head">
    <div class="project-meta">
      <h3>🚧 Work in Progress</h3>
      <p class="lead">
        <div class="rgb-led"></div>
        <span style="margin-left:0.5rem;"> Flashing Firmware...</span>
      </p>
      <div class="project-tags">EECS • Circuits • Build Zone</div>
    </div>
  </div>

  <div class="gallery">
    <div style="
        display:flex; 
        align-items:center; 
        justify-content:center; 
        background:#f8f9fa; 
        border:2px dashed #007bff; 
        border-radius:8px; 
        height:120px; 
        color:#007bff; 
        font-weight:bold;">
      ⚡ Routing Traces... ⚡
    </div>
    <div style="
        display:flex; 
        align-items:center; 
        justify-content:center; 
        background:#fffbe6; 
        border:2px dashed #ffcc00; 
        border-radius:8px; 
        height:120px; 
        color:#b58900; 
        font-weight:bold;">
      🛠️ Debugging... 🛠️
    </div>
    <div style="
        display:flex; 
        align-items:center; 
        justify-content:center; 
        background:#e6f2ff; 
        border:2px dashed #3399ff; 
        border-radius:8px; 
        height:120px; 
        color:#004080; 
        font-weight:bold;">
      ⚙️ Validation in Progress… ⚙️
    </div>
  </div>

  <div class="project-content">
    <p>
      This section is reserved for future projects. Check back soon once the 
      signals are clean and it passes verification
    </p>
  </div>
</article>

